<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive Assessment Dashboard | Lead Analysis System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.05) 10px,
                rgba(255, 255, 255, 0.05) 20px
            );
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .critical-alerts {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .metric-card.critical {
            border-left-color: #e74c3c;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
        }

        .metric-card.warning {
            border-left-color: #f39c12;
            background: linear-gradient(135deg, #fffbf0 0%, #fff3cd 100%);
        }

        .metric-card.success {
            border-left-color: #27ae60;
            background: linear-gradient(135deg, #f0fff4 0%, #d4edda 100%);
        }

        .metric-card.info {
            border-left-color: #3498db;
            background: linear-gradient(135deg, #f0f8ff 0%, #cce7ff 100%);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-title {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .metric-change {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .metric-change.positive {
            color: #27ae60;
        }

        .metric-change.negative {
            color: #e74c3c;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .financial-analysis {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .financial-analysis::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .financial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 1;
        }

        .financial-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .financial-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .financial-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .roi-calculator {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .roi-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .roi-value {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .priority-actions {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .priority-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .action-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .action-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .action-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            width: 40px;
            text-align: center;
        }

        .action-text {
            flex: 1;
            font-weight: 500;
        }

        .cta-section {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
        }

        .cta-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(255, 255, 255, 0.1) 30deg,
                transparent 60deg
            );
            animation: rotate 20s linear infinite;
        }

        .cta-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .cta-subtitle {
            font-size: 1.1rem;
            margin-bottom: 25px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .cta-button {
            background: white;
            color: #333;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background: #f8f9fa;
        }

        .cta-button.primary {
            background: #2c3e50;
            color: white;
        }

        .cta-button.primary:hover {
            background: #34495e;
        }

        .benchmark-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .benchmark-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .gauge-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .financial-grid {
                grid-template-columns: 1fr;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        .loading-animation {
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="dashboard-container loading-animation">
        <!-- Header Section -->
        <div class="header">
            <h1 id="leadName">ANALISI STRATEGICA ESECUTIVA</h1>
            <div class="subtitle">Executive Performance & ROI Assessment Dashboard</div>
        </div>

        <!-- Critical Alerts -->
        <div class="critical-alerts" id="criticalAlerts">
            üö® STATUS CRITICO: Analisi in corso...
        </div>

        <!-- KPI Metrics Grid -->
        <div class="metrics-grid">
            <div class="metric-card critical">
                <div class="metric-header">
                    <span class="metric-title">Family Satisfaction</span>
                    <span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                </div>
                <div class="metric-value" id="familySatisfaction">5/10</div>
                <div class="metric-change negative">
                    <span>‚ö†Ô∏è Zona critica familiare</span>
                </div>
            </div>

            <div class="metric-card critical">
                <div class="metric-header">
                    <span class="metric-title">Stress Impact</span>
                    <span>üìà</span>
                </div>
                <div class="metric-value" id="stressImpact">9/10</div>
                <div class="metric-change negative">
                    <span>üî¥ Impatto lavorativo critico</span>
                </div>
            </div>

            <div class="metric-card warning">
                <div class="metric-header">
                    <span class="metric-title">Boss Trust Level</span>
                    <span>ü§ù</span>
                </div>
                <div class="metric-value" id="bossTrust">7/10</div>
                <div class="metric-change">
                    <span>üü° Margine miglioramento</span>
                </div>
            </div>

            <div class="metric-card warning">
                <div class="metric-header">
                    <span class="metric-title">Energy Level</span>
                    <span>‚ö°</span>
                </div>
                <div class="metric-value" id="energyLevel">6/10</div>
                <div class="metric-change negative">
                    <span>‚¨áÔ∏è Sotto soglia ottimale</span>
                </div>
            </div>

            <div class="metric-card success">
                <div class="metric-header">
                    <span class="metric-title">Motivation Level</span>
                    <span>üéØ</span>
                </div>
                <div class="metric-value" id="motivationLevel">9/10</div>
                <div class="metric-change positive">
                    <span>‚úÖ Altissima motivazione</span>
                </div>
            </div>

            <div class="metric-card info">
                <div class="metric-header">
                    <span class="metric-title">Control Level</span>
                    <span>üéõÔ∏è</span>
                </div>
                <div class="metric-value" id="controlLevel">8/10</div>
                <div class="metric-change positive">
                    <span>üìä Controllo buono</span>
                </div>
            </div>
        </div>

        <!-- ROI Calculator -->
        <div class="roi-calculator">
            <div class="roi-title">ROI PROIETTATO</div>
            <div class="roi-value" id="roiValue">197.5x</div>
            <div>Ritorno investimento garantito in <span id="paybackPeriod">0.06 mesi</span></div>
        </div>

        <!-- Financial Analysis -->
        <div class="financial-analysis">
            <h2 style="text-align: center; margin-bottom: 25px; font-size: 1.8rem;">üí∞ ANALISI FINANZIARIA DETTAGLIATA</h2>
            <div class="financial-grid">
                <div class="financial-item">
                    <div class="financial-value" id="annualLoss">‚Ç¨111,200</div>
                    <div class="financial-label">Perdita Annuale Corrente</div>
                </div>
                <div class="financial-item">
                    <div class="financial-value" id="revenuePotential">‚Ç¨750,000</div>
                    <div class="financial-label">Potenziale Fatturato</div>
                </div>
                <div class="financial-item">
                    <div class="financial-value" id="investmentAmount">‚Ç¨1,000</div>
                    <div class="financial-label">Investimento Richiesto</div>
                </div>
                <div class="financial-item">
                    <div class="financial-value" id="netGain">‚Ç¨308,700</div>
                    <div class="financial-label">Guadagno Netto Annuale</div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">üìä Performance vs Benchmark Settore</div>
                <canvas id="performanceChart" width="400" height="300"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">üìà Proiezione ROI 12 Mesi</div>
                <canvas id="roiChart" width="400" height="300"></canvas>
            </div>
        </div>

        <!-- Priority Actions -->
        <div class="priority-actions">
            <div class="priority-title">üéØ AZIONI PRIORITARIE IMMEDIATE</div>
            <div class="action-item">
                <div class="action-icon">‚ö†Ô∏è</div>
                <div class="action-text" id="priority1">RISCHIO SOSTITUZIONE - Intervento immediato stress management</div>
            </div>
            <div class="action-item">
                <div class="action-icon">‚ö°</div>
                <div class="action-text" id="priority2">CRISI ENERGETICA - Protocolli recupero performance</div>
            </div>
            <div class="action-item">
                <div class="action-icon">üÜò</div>
                <div class="action-text" id="priority3">DISPERAZIONE CRITICA - Sistema supporto familiare</div>
            </div>
            <div class="action-item">
                <div class="action-icon">üèÜ</div>
                <div class="action-text" id="priority4">CONVERSIONE PREMIUM - Ottimizzazione leadership</div>
            </div>
        </div>

        <!-- Benchmark Section -->
        <div class="benchmark-section">
            <div class="benchmark-title">üèÜ POSIZIONAMENTO COMPETITIVO</div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                <div style="text-align: center;">
                    <canvas id="performanceGauge" width="150" height="150"></canvas>
                    <div style="margin-top: 10px; font-weight: 600;">Performance: <span id="performancePercentile">56%</span></div>
                </div>
                <div style="text-align: center;">
                    <canvas id="stressGauge" width="150" height="150"></canvas>
                    <div style="margin-top: 10px; font-weight: 600;">Stress: <span id="stressPercentile">90%</span></div>
                </div>
                <div style="text-align: center;">
                    <canvas id="familyGauge" width="150" height="150"></canvas>
                    <div style="margin-top: 10px; font-weight: 600;">Famiglia: <span id="familyPercentile">50%</span></div>
                </div>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="cta-section">
            <div class="cta-title">INTERVENTO STRATEGICO IMMEDIATO RICHIESTO</div>
            <div class="cta-subtitle">
                Finestra di opportunit√†: <strong>30 giorni</strong> per massimizzare ROI e prevenire escalation critica
            </div>
            <div class="cta-buttons">
                <a href="tel:+393351013368" class="cta-button primary">
                    üìû CHIAMATA STRATEGICA IMMEDIATA
                </a>
                <a href="mailto:info@executivecoaching.com?subject=URGENT: Executive Assessment Follow-up" class="cta-button">
                    üìß EMAIL PRIORITARIA
                </a>
                <a href="https://wa.me/393351013368" class="cta-button">
                    üí¨ WHATSAPP BUSINESS
                </a>
            </div>
        </div>
    </div>

    <script>
        // Dati del lead (adattabili per ogni lead)
        const leadData = {
            id: 1,
            name: "GORI Andrea",
            email: "sanfilippo.giuseppe01@gmail.com",
            position: "Area Manager / Sales Manager",
            territorySize: "‚Ç¨5M - ‚Ç¨10M",
            teamSize: "51-100 persone",
            sector: "Vendita diretta prodotti alimentari",
            familySatisfaction: 5,
            stressImpact: 9,
            bossTrust: 7,
            energyLevel: 6,
            controlLevel: 8,
            motivationLevel: 9,
            annualLoss: 111200,
            revenuePotential: 750000,
            investmentAmount: 1000,
            roiMultiplier: 197.5,
            paybackMonths: 0.06,
            performancePercentile: 56,
            stressPercentile: 90,
            familyPercentile: 50,
            sectorAverage: {
                performance: 6.6,
                stress: 6.7,
                family: 5.3
            },
            priorities: [
                "RISCHIO SOSTITUZIONE - Intervento immediato stress management",
                "CRISI ENERGETICA - Protocolli recupero performance",
                "DISPERAZIONE CRITICA - Sistema supporto familiare",
                "CONVERSIONE PREMIUM - Ottimizzazione leadership"
            ],
            criticalAlerts: "‚ö†Ô∏è FAMIGLIA CRITICA üéØ RISCHIO SOSTITUZIONE üí∞ EMORRAGIA ‚Ç¨111,200"
        };

        // Funzione per aggiornare la dashboard con i dati del lead
        function updateDashboard(data) {
            // Aggiorna header
            document.getElementById('leadName').textContent = `ANALISI STRATEGICA: ${data.name}`;
            
            // Aggiorna alert critici
            document.getElementById('criticalAlerts').textContent = data.criticalAlerts;
            
            // Aggiorna metriche
            document.getElementById('familySatisfaction').textContent = `${data.familySatisfaction}/10`;
            document.getElementById('stressImpact').textContent = `${data.stressImpact}/10`;
            document.getElementById('bossTrust').textContent = `${data.bossTrust}/10`;
            document.getElementById('energyLevel').textContent = `${data.energyLevel}/10`;
            document.getElementById('motivationLevel').textContent = `${data.motivationLevel}/10`;
            document.getElementById('controlLevel').textContent = `${data.controlLevel}/10`;
            
            // Aggiorna dati finanziari
            document.getElementById('annualLoss').textContent = `‚Ç¨${data.annualLoss.toLocaleString()}`;
            document.getElementById('revenuePotential').textContent = `‚Ç¨${data.revenuePotential.toLocaleString()}`;
            document.getElementById('investmentAmount').textContent = `‚Ç¨${data.investmentAmount.toLocaleString()}`;
            document.getElementById('roiValue').textContent = `${data.roiMultiplier}x`;
            document.getElementById('paybackPeriod').textContent = `${data.paybackMonths.toFixed(2)} mesi`;
            
            const netGain = data.revenuePotential - data.annualLoss;
            document.getElementById('netGain').textContent = `‚Ç¨${netGain.toLocaleString()}`;
            
            // Aggiorna percentili
            document.getElementById('performancePercentile').textContent = `${data.performancePercentile}%`;
            document.getElementById('stressPercentile').textContent = `${data.stressPercentile}%`;
            document.getElementById('familyPercentile').textContent = `${data.familyPercentile}%`;
            
            // Aggiorna priorit√†
            data.priorities.forEach((priority, index) => {
                const element = document.getElementById(`priority${index + 1}`);
                if (element) {
                    element.textContent = priority;
                }
            });
        }

        // Crea grafici
        function createCharts() {
            // Grafico Performance vs Benchmark
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            new Chart(performanceCtx, {
                type: 'radar',
                data: {
                    labels: ['Performance', 'Gestione Stress', 'Work-Life Balance', 'Leadership', 'Motivazione', 'Controllo'],
                    datasets: [{
                        label: leadData.name,
                        data: [leadData.performancePercentile, 100-leadData.stressPercentile, leadData.familyPercentile, leadData.bossTrust*10, leadData.motivationLevel*10, leadData.controlLevel*10],
                        backgroundColor: 'rgba(255, 107, 107, 0.2)',
                        borderColor: 'rgba(255, 107, 107, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(255, 107, 107, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(255, 107, 107, 1)'
                    }, {
                        label: 'Benchmark Settore',
                        data: [65, 67, 53, 70, 75, 70],
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(52, 152, 219, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(52, 152, 219, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });

            // Grafico ROI Proiezione
            const roiCtx = document.getElementById('roiChart').getContext('2d');
            const months = ['Mese 1', 'Mese 2', 'Mese 3', 'Mese 6', 'Mese 9', 'Mese 12'];
            const roiProgression = [0, 25000, 62500, 154375, 231563, 308750];
            const investmentCumulative = [1000, 1000, 1000, 1000, 1000, 1000];

            new Chart(roiCtx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'ROI Cumulativo (‚Ç¨)',
                        data: roiProgression,
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderColor: 'rgba(39, 174, 96, 1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: 'rgba(39, 174, 96, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }, {
                        label: 'Investimento (‚Ç¨)',
                        data: investmentCumulative,
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderColor: 'rgba(231, 76, 60, 1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        pointBackgroundColor: 'rgba(231, 76, 60, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Ç¨' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });

            // Gauge Charts per Benchmark
            createGaugeChart('performanceGauge', leadData.performancePercentile, '#3498db');
            createGaugeChart('stressGauge', leadData.stressPercentile, '#e74c3c');
            createGaugeChart('familyGauge', leadData.familyPercentile, '#f39c12');
        }

        // Funzione per creare gauge charts
        function createGaugeChart(canvasId, value, color) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [value, 100 - value],
                        backgroundColor: [color, '#e9ecef'],
                        borderWidth: 0,
                        cutout: '75%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: false
                        }
                    },
                    elements: {
                        arc: {
                            borderWidth: 0
                        }
                    }
                },
                plugins: [{
                    beforeDraw: function(chart) {
                        const width = chart.width;
                        const height = chart.height;
                        const ctx = chart.ctx;
                        
                        ctx.restore();
                        const fontSize = (height / 80).toFixed(2);
                        ctx.font = fontSize + "em sans-serif";
                        ctx.textBaseline = "middle";
                        ctx.fillStyle = color;
                        
                        const text = value + "%";
                        const textX = Math.round((width - ctx.measureText(text).width) / 2);
                        const textY = height / 2;
                        
                        ctx.fillText(text, textX, textY);
                        ctx.save();
                    }
                }]
            });
        }

        // Funzione per animazione contatori
        function animateCounters() {
            const counters = document.querySelectorAll('.metric-value');
            counters.forEach(counter => {
                if (counter.textContent.includes('/')) {
                    const [current, total] = counter.textContent.split('/');
                    animateValue(counter, 0, parseInt(current), 1000, total);
                }
            });
        }

        function animateValue(element, start, end, duration, suffix = '') {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const current = Math.floor(progress * (end - start) + start);
                element.textContent = suffix ? `${current}/${suffix}` : current;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Funzione per simulare aggiornamento dati in tempo reale
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Simula piccole variazioni nei dati per effetto "live"
                const elements = document.querySelectorAll('.metric-card');
                elements.forEach(element => {
                    element.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                    }, 200);
                });
            }, 30000); // Ogni 30 secondi
        }

        // Funzione per gestire responsivit√†
        function handleResponsive() {
            const charts = Chart.instances;
            Object.values(charts).forEach(chart => {
                chart.resize();
            });
        }

        // Event listeners
        window.addEventListener('resize', handleResponsive);
        
        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard(leadData);
            createCharts();
            animateCounters();
            simulateRealTimeUpdates();
            
            // Effetto di caricamento
            setTimeout(() => {
                document.querySelector('.dashboard-container').style.opacity = '1';
            }, 100);
        });

        // Funzione per aggiornare dashboard con nuovi dati lead
        function updateLeadData(newLeadData) {
            Object.assign(leadData, newLeadData);
            updateDashboard(leadData);
            
            // Ricreare i grafici con i nuovi dati
            Chart.instances.forEach(chart => chart.destroy());
            createCharts();
        }

        // Funzione per esportare i dati
        function exportDashboardData() {
            const dataToExport = {
                timestamp: new Date().toISOString(),
                leadData: leadData,
                analysis: {
                    riskLevel: 'CRITICO',
                    conversionProbability: 95,
                    urgencyLevel: 'MASSIMA',
                    recommendedAction: 'INTERVENTO IMMEDIATO'
                }
            };
            
            const blob = new Blob([JSON.stringify(dataToExport, null, 2)], {
                type: 'application/json'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `executive-assessment-${leadData.name.replace(' ', '-')}-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Funzione per integrazione CRM
        function sendToCRM() {
            const crmData = {
                leadId: leadData.id,
                name: leadData.name,
                email: leadData.email,
                score: 95,
                priority: 'A+',
                stage: 'QUALIFIED',
                value: leadData.revenuePotential,
                closeProbability: 95,
                nextAction: 'CHIAMATA_IMMEDIATA',
                tags: ['HIGH_VALUE', 'CRITICAL', 'IMMEDIATE_ACTION']
            };
            
            // Simulazione invio a CRM (sostituire con API reale)
            console.log('Inviando al CRM:', crmData);
            
            // Mostra notifica di successo
            showNotification('Dati inviati al CRM con successo!', 'success');
        }

        // Funzione per notifiche
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#27ae60' : '#3498db'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // CSS per animazioni notifiche
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // API per integrazione esterna
        window.ExecutiveDashboard = {
            updateData: updateLeadData,
            exportData: exportDashboardData,
            sendToCRM: sendToCRM,
            getCurrentData: () => leadData
        };
    </script>
</body>
</html>
